<%

requests = requests.reverse().reduce(function (a, b) {
	a[b.clientId.clientId] = a[b.clientId.clientId] || []
	a[b.clientId.clientId].push(b)
	return a
}, {})

%>

<div class="container my-4" ng-controller="requestsCtrl">
	<h1 class="mb-4"><i class="fas fa-bullhorn"></i> Pedidos</h1>

	<ul class="nav nav-pills">
		<li class="nav-item">
			<button class="nav-link active" data-bs-toggle="tab" data-bs-target="#pending">Pendentes</button>
		</li>
		<li class="nav-item">
			<button class="nav-link" data-bs-toggle="tab" data-bs-target="#rejected">Recusados</button>
		</li>
		<li class="nav-item">
			<button class="nav-link" data-bs-toggle="tab" data-bs-target="#closed">Fechados</button>
		</li>
	</ul>
	<div class="tab-content">
		<div class="tab-pane fade show active" id="pending">
			<ng-include src="'/request.html'" ng-init="env='pending'" ng-if="true"></ng-include>
		</div>

		<div class="tab-pane fade" id="rejected">
			<ng-include src="'/request.html'" ng-init="env='rejected'" ng-if="true"></ng-include>
		</div>

		<div class="tab-pane fade" id="closed">
			<ng-include src="'/request.html'" ng-init="env='closed'" ng-if="true"></ng-include>
		</div>
	</div>
</div>

<script>const serverData = <%- JSON.stringify(requests) %></script>
<script src="/js/admin/requests.js"></script>