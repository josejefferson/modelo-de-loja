<% const action = locals.product ? `/products/edit/${product.id}` : '/products/add'
const { id, name, description, price, image, stock } = locals.product || locals.userData?.[0] || {} %>

<div class="container my-4">
	<% if (!locals.product) { %>
		<h1 class="mb-4"><i class="fas fa-plus"></i> Adicionar produto</h1>
	<% } else { %>
		<h1 class="mb-4"><i class="fas fa-pencil-alt"></i> Editar produto</h1>
	<% } %>

	<form action="<%= action %>" method="POST">
		<label class="form-group d-block">
			<div>Nome <span class="text-danger">*</span></div>
			<input type="text" class="form-control form-control-lg" name="name" value="<%= name %>" autocomplete="off" autofocus required>
		</label>

		<label class="form-group d-block">
			<div class="mt-2">Descrição</div>
			<textarea class="form-control" rows="4" name="description" autocomplete="off"><%= description %></textarea>
		</label>

		<label class="form-group d-block">
			<div class="mt-2">Preço <span class="text-danger">*</span></div>
			<div class="input-group">
				<div class="input-group-text">R$</div>
				<input type="number" step=".01" class="form-control form-control-lg" name="price" value="<%= price %>" autocomplete="off" required>
			</div>
		</label>

		<label class="form-group d-block">
			<div class="mt-2">URL da imagem</div>
			<input type="url" class="form-control" name="image" value="<%= image %>" autocomplete="off">
		</label>

		<label class="form-group d-block">
			<div class="mt-2">Estoque <span class="text-danger">*</span></div>
			<input type="number" class="form-control" name="stock" value="<%= stock %>" autocomplete="off" required>
		</label>

		<div class="text-center mt-3">
			<button class="btn btn-lg btn-success" type="submit">
				<i class="fas fa-save"></i> Salvar produto
			</button>
		</div>
	</form>
</div>