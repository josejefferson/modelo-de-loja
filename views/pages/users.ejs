<div class="container my-4">
	<h1 class="mb-4"><i class="fas fa-users"></i> Usuários</h1>

	<div class="users row">
		<% users.forEach(user => { %>
			<div class="col-12 col-md-6 mt-4 user">
				<div class="card shadow-sm h-100">
					<div class="card-body">
						<h4><i class="fas fa-user"></i> <%= user.name %></h4><hr>
						<div><i class="fas fa-map-marker-alt"></i> <b>Endereço:</b> <%= user.address %></div>
						<div><i class="fas fa-phone-alt"></i> <b>Telefone:</b> <a href="tel:<%= user.phone %>"><%= user.phone %></a></div>
						<div><i class="fas fa-at"></i> <b>E-mail:</b> <a href="mailto:<%= user.email %>"><%= user.email %></a></div>
					</div>

					<ul class="list-group list-group-flush">
						<a href="/users/edit/<%= user.clientId %>" class="list-group-item list-group-item-action list-group-item-warning">
							<i class="fas fa-pencil-alt"></i> Editar
						</a>
						<button class="list-group-item list-group-item-action list-group-item-danger remove" data-client-id="<%= user.clientId %>">
							<i class="fas fa-times"></i> Remover
						</button>
					</ul>
				</div>
			</div>
		<% }) %>

		<div class="col-12 col-md-6 mt-4">
			<div class="card shadow-sm h-100 bg-light">
				<a href="/users/add" class="btn card-body d-flex flex-column align-items-center justify-content-center">
					<i class="fas fa-plus fa-5x"></i>
					<b class="mt-3 fs-5">Adicionar usuário</b>
				</a>
			</div>
		</div>
	</div>
</div>

<script>
	$('.remove').click(function () {
		Swal.fire({
			title: 'Remover usuário',
			text: 'Tem certeza que deseja remover este usuário?',
			showDenyButton: true,
			showCancelButton: false,
			confirmButtonText: 'Sim',
			denyButtonText: 'Não'
		}).then(r => {
			if (!r.isConfirmed) return
			$this = $(this)
			clientId = $this.data('clientId')
			userIds = Cookies.get('userIds').split(',')
			userIds.splice(userIds.indexOf(clientId), 1)
			userIds = userIds.join(',')
			Cookies.set('userIds', userIds, {expires: 3650})
			$this.closest('.user').slideUp('fast', function () { $(this).remove() })
		})
	})
</script>